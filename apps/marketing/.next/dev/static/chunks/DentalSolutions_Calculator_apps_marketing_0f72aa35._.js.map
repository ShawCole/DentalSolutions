{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/ShawCole/DentalSolutions_Calculator/apps/marketing/lib/firebase.ts"],"sourcesContent":["import { initializeApp, getApps, getApp, FirebaseApp } from \"firebase/app\";\nimport { getAuth, connectAuthEmulator, Auth } from \"firebase/auth\";\nimport { getFirestore, connectFirestoreEmulator, Firestore } from \"firebase/firestore\";\n\nconst firebaseConfig = {\n    apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n    authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\n    projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n    storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\n    messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\n    appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\n};\n\n// Check if config is valid (has required fields)\nconst isConfigValid = Boolean(\n    firebaseConfig.apiKey &&\n    firebaseConfig.authDomain &&\n    firebaseConfig.projectId\n);\n\nlet app: FirebaseApp | null = null;\nlet auth: Auth | null = null;\nlet db: Firestore | null = null;\n\nfunction getFirebaseApp(): FirebaseApp | null {\n    if (!isConfigValid) {\n        if (typeof window !== \"undefined\") {\n            console.warn(\"[firebase] Missing Firebase configuration. Set NEXT_PUBLIC_FIREBASE_* environment variables.\");\n        }\n        return null;\n    }\n\n    if (app) return app;\n\n    app = getApps().length > 0 ? getApp() : initializeApp(firebaseConfig);\n    return app;\n}\n\nfunction getFirebaseAuth(): Auth | null {\n    const firebaseApp = getFirebaseApp();\n    if (!firebaseApp) return null;\n\n    if (auth) return auth;\n\n    auth = getAuth(firebaseApp);\n\n    // Connect to emulators in development\n    if (process.env.NODE_ENV === \"development\" && process.env.NEXT_PUBLIC_USE_EMULATORS === \"true\") {\n        connectAuthEmulator(auth, \"http://localhost:9099\", { disableWarnings: true });\n    }\n\n    return auth;\n}\n\nfunction getFirebaseDb(): Firestore | null {\n    const firebaseApp = getFirebaseApp();\n    if (!firebaseApp) return null;\n\n    if (db) return db;\n\n    db = getFirestore(firebaseApp);\n\n    // Connect to emulators in development\n    if (process.env.NODE_ENV === \"development\" && process.env.NEXT_PUBLIC_USE_EMULATORS === \"true\") {\n        connectFirestoreEmulator(db, \"localhost\", 8080);\n    }\n\n    return db;\n}\n\nexport { getFirebaseAuth as auth, getFirebaseDb as db };\nexport default getFirebaseApp;\n"],"names":[],"mappings":";;;;;;;;AAKY;AALZ;AAAA;AACA;AAAA;AACA;AAAA;;;;AAEA,MAAM,iBAAiB;IACnB,QAAQ,yMAAO,CAAC,GAAG,CAAC,4BAA4B;IAChD,YAAY,yMAAO,CAAC,GAAG,CAAC,gCAAgC;IACxD,WAAW,yMAAO,CAAC,GAAG,CAAC,+BAA+B;IACtD,eAAe,yMAAO,CAAC,GAAG,CAAC,mCAAmC;IAC9D,mBAAmB,yMAAO,CAAC,GAAG,CAAC,wCAAwC;IACvE,OAAO,yMAAO,CAAC,GAAG,CAAC,2BAA2B;AAClD;AAEA,iDAAiD;AACjD,MAAM,gBAAgB,QAClB,eAAe,MAAM,IACrB,eAAe,UAAU,IACzB,eAAe,SAAS;AAG5B,IAAI,MAA0B;AAC9B,IAAI,OAAoB;AACxB,IAAI,KAAuB;AAE3B,SAAS;IACL,IAAI,CAAC,eAAe;QAChB,wCAAmC;YAC/B,QAAQ,IAAI,CAAC;QACjB;QACA,OAAO;IACX;IAEA,IAAI,KAAK,OAAO;IAEhB,MAAM,IAAA,4MAAO,IAAG,MAAM,GAAG,IAAI,IAAA,2MAAM,MAAK,IAAA,kNAAa,EAAC;IACtD,OAAO;AACX;AAEA,SAAS;IACL,MAAM,cAAc;IACpB,IAAI,CAAC,aAAa,OAAO;IAEzB,IAAI,MAAM,OAAO;IAEjB,OAAO,IAAA,sMAAO,EAAC;IAEf,sCAAsC;IACtC,IAAI,oDAAyB,iBAAiB,yMAAO,CAAC,GAAG,CAAC,yBAAyB,KAAK,QAAQ;QAC5F,IAAA,kNAAmB,EAAC,MAAM,yBAAyB;YAAE,iBAAiB;QAAK;IAC/E;IAEA,OAAO;AACX;AAEA,SAAS;IACL,MAAM,cAAc;IACpB,IAAI,CAAC,aAAa,OAAO;IAEzB,IAAI,IAAI,OAAO;IAEf,KAAK,IAAA,gNAAY,EAAC;IAElB,sCAAsC;IACtC,IAAI,oDAAyB,iBAAiB,yMAAO,CAAC,GAAG,CAAC,yBAAyB,KAAK,QAAQ;QAC5F,IAAA,4NAAwB,EAAC,IAAI,aAAa;IAC9C;IAEA,OAAO;AACX;;uCAGe","debugId":null}},
    {"offset": {"line": 79, "column": 0}, "map": {"version":3,"sources":["file:///Users/ShawCole/DentalSolutions_Calculator/apps/marketing/lib/auth/AuthContext.tsx"],"sourcesContent":["\"use client\";\n\nimport { createContext, useContext, useEffect, useState, ReactNode } from \"react\";\nimport {\n    User,\n    signInWithEmailAndPassword,\n    signOut as firebaseSignOut,\n    onAuthStateChanged,\n    createUserWithEmailAndPassword,\n} from \"firebase/auth\";\nimport { doc, getDoc, setDoc, serverTimestamp } from \"firebase/firestore\";\nimport { auth as getAuth, db as getDb } from \"@/lib/firebase\";\nimport type { UserProfile, UserRole } from \"@dentalsolutions/core\";\n\ninterface AuthContextType {\n    user: User | null;\n    profile: UserProfile | null;\n    loading: boolean;\n    signIn: (email: string, password: string) => Promise<void>;\n    signUp: (email: string, password: string, displayName: string, role?: UserRole) => Promise<void>;\n    signOut: () => Promise<void>;\n    isAdmin: boolean;\n    isStaff: boolean;\n    isClient: boolean;\n    isConfigured: boolean;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n    const [user, setUser] = useState<User | null>(null);\n    const [profile, setProfile] = useState<UserProfile | null>(null);\n    const [loading, setLoading] = useState(true);\n\n    const auth = getAuth();\n    const db = getDb();\n    const isConfigured = Boolean(auth && db);\n\n    useEffect(() => {\n        if (!auth) {\n            setLoading(false);\n            return;\n        }\n\n        const unsubscribe = onAuthStateChanged(auth, async (firebaseUser) => {\n            setUser(firebaseUser);\n\n            if (firebaseUser && db) {\n                // Fetch user profile from Firestore\n                const profileRef = doc(db, \"users\", firebaseUser.uid);\n                const profileSnap = await getDoc(profileRef);\n\n                if (profileSnap.exists()) {\n                    const data = profileSnap.data();\n                    setProfile({\n                        uid: firebaseUser.uid,\n                        email: firebaseUser.email || \"\",\n                        displayName: data.displayName,\n                        role: data.role,\n                        createdAt: data.createdAt?.toDate() || new Date(),\n                        lastLogin: data.lastLogin?.toDate() || new Date(),\n                        clientId: data.clientId,\n                        providerId: data.providerId,\n                        permissions: data.permissions,\n                    });\n\n                    // Update last login\n                    await setDoc(profileRef, { lastLogin: serverTimestamp() }, { merge: true });\n                } else {\n                    setProfile(null);\n                }\n            } else {\n                setProfile(null);\n            }\n\n            setLoading(false);\n        });\n\n        return () => unsubscribe();\n    }, [auth, db]);\n\n    const signIn = async (email: string, password: string) => {\n        if (!auth) throw new Error(\"Firebase not configured\");\n        await signInWithEmailAndPassword(auth, email, password);\n    };\n\n    const signUp = async (\n        email: string,\n        password: string,\n        displayName: string,\n        role: UserRole = \"client\"\n    ) => {\n        if (!auth || !db) throw new Error(\"Firebase not configured\");\n\n        const credential = await createUserWithEmailAndPassword(auth, email, password);\n\n        // Create user profile in Firestore\n        const profileRef = doc(db, \"users\", credential.user.uid);\n        await setDoc(profileRef, {\n            email,\n            displayName,\n            role,\n            createdAt: serverTimestamp(),\n            lastLogin: serverTimestamp(),\n        });\n    };\n\n    const signOut = async () => {\n        if (!auth) return;\n        await firebaseSignOut(auth);\n        setProfile(null);\n    };\n\n    const isAdmin = profile?.role === \"admin\";\n    const isStaff = profile?.role === \"staff\" || isAdmin;\n    const isClient = profile?.role === \"client\";\n\n    return (\n        <AuthContext.Provider\n            value={{\n                user,\n                profile,\n                loading,\n                signIn,\n                signUp,\n                signOut,\n                isAdmin,\n                isStaff,\n                isClient,\n                isConfigured,\n            }}\n        >\n            {children}\n        </AuthContext.Provider>\n    );\n}\n\nexport function useAuth() {\n    const context = useContext(AuthContext);\n    if (context === undefined) {\n        throw new Error(\"useAuth must be used within an AuthProvider\");\n    }\n    return context;\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAAA;AAOA;AAAA;AACA;;;AAXA;;;;;AA2BA,MAAM,4BAAc,IAAA,4MAAa,EAA8B;AAExD,SAAS,aAAa,EAAE,QAAQ,EAA2B;;IAC9D,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,uMAAQ,EAAc;IAC9C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,uMAAQ,EAAqB;IAC3D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,uMAAQ,EAAC;IAEvC,MAAM,OAAO,IAAA,6KAAO;IACpB,MAAM,KAAK,IAAA,2KAAK;IAChB,MAAM,eAAe,QAAQ,QAAQ;IAErC,IAAA,wMAAS;kCAAC;YACN,IAAI,CAAC,MAAM;gBACP,WAAW;gBACX;YACJ;YAEA,MAAM,cAAc,IAAA,iNAAkB,EAAC;sDAAM,OAAO;oBAChD,QAAQ;oBAER,IAAI,gBAAgB,IAAI;wBACpB,oCAAoC;wBACpC,MAAM,aAAa,IAAA,uMAAG,EAAC,IAAI,SAAS,aAAa,GAAG;wBACpD,MAAM,cAAc,MAAM,IAAA,0MAAM,EAAC;wBAEjC,IAAI,YAAY,MAAM,IAAI;4BACtB,MAAM,OAAO,YAAY,IAAI;4BAC7B,WAAW;gCACP,KAAK,aAAa,GAAG;gCACrB,OAAO,aAAa,KAAK,IAAI;gCAC7B,aAAa,KAAK,WAAW;gCAC7B,MAAM,KAAK,IAAI;gCACf,WAAW,KAAK,SAAS,EAAE,YAAY,IAAI;gCAC3C,WAAW,KAAK,SAAS,EAAE,YAAY,IAAI;gCAC3C,UAAU,KAAK,QAAQ;gCACvB,YAAY,KAAK,UAAU;gCAC3B,aAAa,KAAK,WAAW;4BACjC;4BAEA,oBAAoB;4BACpB,MAAM,IAAA,0MAAM,EAAC,YAAY;gCAAE,WAAW,IAAA,mNAAe;4BAAG,GAAG;gCAAE,OAAO;4BAAK;wBAC7E,OAAO;4BACH,WAAW;wBACf;oBACJ,OAAO;wBACH,WAAW;oBACf;oBAEA,WAAW;gBACf;;YAEA;0CAAO,IAAM;;QACjB;iCAAG;QAAC;QAAM;KAAG;IAEb,MAAM,SAAS,OAAO,OAAe;QACjC,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;QAC3B,MAAM,IAAA,yNAA0B,EAAC,MAAM,OAAO;IAClD;IAEA,MAAM,SAAS,OACX,OACA,UACA,aACA,OAAiB,QAAQ;QAEzB,IAAI,CAAC,QAAQ,CAAC,IAAI,MAAM,IAAI,MAAM;QAElC,MAAM,aAAa,MAAM,IAAA,6NAA8B,EAAC,MAAM,OAAO;QAErE,mCAAmC;QACnC,MAAM,aAAa,IAAA,uMAAG,EAAC,IAAI,SAAS,WAAW,IAAI,CAAC,GAAG;QACvD,MAAM,IAAA,0MAAM,EAAC,YAAY;YACrB;YACA;YACA;YACA,WAAW,IAAA,mNAAe;YAC1B,WAAW,IAAA,mNAAe;QAC9B;IACJ;IAEA,MAAM,UAAU;QACZ,IAAI,CAAC,MAAM;QACX,MAAM,IAAA,sMAAe,EAAC;QACtB,WAAW;IACf;IAEA,MAAM,UAAU,SAAS,SAAS;IAClC,MAAM,UAAU,SAAS,SAAS,WAAW;IAC7C,MAAM,WAAW,SAAS,SAAS;IAEnC,qBACI,2NAAC,YAAY,QAAQ;QACjB,OAAO;YACH;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;QACJ;kBAEC;;;;;;AAGb;GA1GgB;KAAA;AA4GT,SAAS;;IACZ,MAAM,UAAU,IAAA,yMAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACvB,MAAM,IAAI,MAAM;IACpB;IACA,OAAO;AACX;IANgB","debugId":null}},
    {"offset": {"line": 222, "column": 0}, "map": {"version":3,"sources":["file:///Users/ShawCole/DentalSolutions_Calculator/apps/marketing/components/Providers.tsx"],"sourcesContent":["\"use client\";\n\nimport { QueryClient, QueryClientProvider } from \"@tanstack/react-query\";\nimport { ReactNode, useState } from \"react\";\nimport { AuthProvider } from \"@/lib/auth/AuthContext\";\n\nexport function Providers({ children }: { children: ReactNode }) {\n    const [queryClient] = useState(\n        () =>\n            new QueryClient({\n                defaultOptions: {\n                    queries: {\n                        staleTime: 60 * 1000, // 1 minute\n                        refetchOnWindowFocus: false,\n                    },\n                },\n            })\n    );\n\n    return (\n        <QueryClientProvider client={queryClient}>\n            <AuthProvider>{children}</AuthProvider>\n        </QueryClientProvider>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AACA;AACA;;;AAJA;;;;AAMO,SAAS,UAAU,EAAE,QAAQ,EAA2B;;IAC3D,MAAM,CAAC,YAAY,GAAG,IAAA,uMAAQ;8BAC1B,IACI,IAAI,6NAAW,CAAC;gBACZ,gBAAgB;oBACZ,SAAS;wBACL,WAAW,KAAK;wBAChB,sBAAsB;oBAC1B;gBACJ;YACJ;;IAGR,qBACI,2NAAC,8OAAmB;QAAC,QAAQ;kBACzB,cAAA,2NAAC,iMAAY;sBAAE;;;;;;;;;;;AAG3B;GAlBgB;KAAA","debugId":null}}]
}